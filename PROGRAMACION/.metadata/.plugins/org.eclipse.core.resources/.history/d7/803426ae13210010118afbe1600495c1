package tema06.EjBasicos.Ej04.app;

import java.sql.SQLException;
import java.util.List;
import java.util.Scanner;
import tema06.EjBasicos.Ej03.modelo.Persona;
import tema06.EjBasicos.Ej03.servicios.PersonasService;

public class App {

	public static void main(String[] args) {
		PersonasService service = new PersonasService();
		Scanner sc = new Scanner(System.in);
		int num;
		while(true) {
		System.out.println("Elige una de estas opciones: \n\t(1) Buscar persona por DNI \n\t(2) Buscar persona por "
				+ "nombre/apellidos \n\t(3) Insertar persona \n\t(0) Salir");
		 num = sc.nextInt();
		 if (num == 1 || num == 2 || num == 3 || num == 0) {
				break;
			} else {
				System.out.println("NÃºmero incorrecto");
			}
		}
		
		try {
			
			
			
			if(num == 1) {
				sc.nextLine();
				System.out.println("Indica el DNI de la persona");
				String vDNI = sc.nextLine();
				Persona p = service.consultarPersona(vDNI);

				if (p == null) {
					System.out.println("No existe persona con los datos introducidos");
				} else {
					System.out.println(p);
				}
			}
			if(num == 2) {
				System.out.println("Indica nombre o apellidos a buscar:");
				String filtro = "";
				do {
					filtro = sc.nextLine();
				} while (filtro.isEmpty());

				List<Persona> lista = service.buscarPersona(filtro);
				if(lista.isEmpty())
						System.out.println("No hay ninguna persona con ese filtro");
				for (Persona persona : lista) {
							System.out.println(persona);
						}
			}
			if(num == 3) {
				
			}
		  
		} catch (SQLException e) {
			System.out.println("Exception en main: " + e.getMessage());
		}finally {
			sc.close();
		}
		
		
	}
}